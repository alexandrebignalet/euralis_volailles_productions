<div class="container">
    <div class="row">
        <h1>
            <i class="glyphicon glyphicon-grain" style="color:rgba(219, 226, 13, 0.88)"></i>
            <span style="color: #309f41;">Gestion des données</span>
            <span style="color: #a6ce39;">de productions</span>
        </h1><hr>
        <div class="pull-right">
            <button class="btn btn-block btn-success" ui-sref="management.createFacilityCharges">
                <span class="glyphicon glyphicon-plus"></span>
                Créer une nouvelle grille de Charges Bâtiment
            </button>

            <button class="btn btn-block btn-info" ui-sref="management.createFacility">
                <span class="glyphicon glyphicon-plus"></span>
                Créer un nouveau type de bâtiment
            </button>

            <button class="btn btn-block btn-primary" ui-sref="management.create">
                <span class="glyphicon glyphicon-plus"></span>
                Créer un nouveau type de production
            </button>
        </div>
    </div>
    <table class="table table-responsive table-hover management-table">
        <thead>
            <tr>
                <th>Nom de production</th>
                <th>Département</th>
                <th>Taille</th>
                <th>Type</th>
                <th>Nombre de poussins</th>
                <th>Poids moyen</th>
                <th>Age</th>
                <th>Nb. bandes/an</th>
                <th>I.C.</th>
                <th>% Mortalité</th>
                <th>Prix vaccins</th>
                <th>Prix aliment</th>
                <th>Prix du classé</th>
                <th>Prix du déclassé</th>
                <th>Taux de déclassé</th>
                <th>Taux de saisie</th>
                <th>Réduction à l'achat</th>
                <th>Détails</th>
                <th>Modifier/Supprimer</th>
            </tr>
        </thead>
        <tbody>

            <tr ng-repeat-start="production in $ctrl.productions">
                <td>{{ production.name }}</td>
                <td>{{ production.department }}</td>
                <td>{{ production.facility.size }}m²</td>
                <td>{{ production.facility.type | uppercase }}</td>
                <td class="aligntd">{{ production.chickNb }}</td>
                <td class="aligntd">{{ production.avgWeight }}</td>
                <td class="aligntd">{{ production.age }} j.</td>
                <td class="aligntd">{{ production.breedingPerYear }}</td>
                <td class="aligntd">{{ production.consumptionIndex }}</td>
                <td class="aligntd">{{ production.mortalityPercent * 100}}%</td>
                <td class="aligntd">{{ production.vaccinesPrice | number: 2}}€</td>
                <td class="aligntd">{{ production.foodPrice | number: 2}}€</td>
                <td class="aligntd">{{ production.classedPrice | number: 2}}€</td>
                <td class="aligntd">{{ production.declassedPrice | number: 2}}€</td>
                <td class="aligntd">{{ production.breedingDeclassedPercent * 100}}%</td>
                <td class="aligntd">{{ production.restraintPercent * 100}}%</td>
                <td class="aligntd">{{ production.chickPurchaseReduction * 100}}%</td>
                <td class="aligntd">
                    <div class="dropdown">
                        <button class="btn btn-info" type="button">Détails</button>
                    </div>
                </td>
                <td class="aligntd">
                    <button class="btn btn-success" ui-sref="management.edit({id: production.id})"><span class="glyphicon glyphicon-pencil"></span></button>
                    <button class="btn btn-danger" ui-sref="management.remove({id: production.id})"><span class="glyphicon glyphicon-remove"></span></button>
                </td>
            </tr>
            <tr ng-if="expanded[$index]" ng-repeat-end="">
                <td rowspan="1" colspan="10">
                    <h3 class="col-md-12">Batiment</h3><hr>
                    <strong class="col-md-6">Taille: </strong>
                    <span class="col-md-6">{{production.facility.size}}m²</span>
                    <br>

                    <h3 class="col-md-12">Charges par poussin</h3><hr>
                    <strong class="col-md-6">Chauffage: </strong>
                    <span class="col-md-6">{{production.facility.facilityCharges.warming}}€</span>
                    <br>
                    <strong class="col-md-6">Prix: </strong>
                    <span class="col-md-6">{{production.facility.facilityCharges.chickPrice}}€</span>
                    <br>
                    <strong class="col-md-6">Vétérinaire: </strong>
                    <span class="col-md-6">{{production.facility.facilityCharges.vetPrice}}€</span>
                    <br>
                    <strong class="col-md-6">Côtisations: </strong>
                    <span class="col-md-6">{{production.facility.facilityCharges.contributions}}€</span>
                    <br>
                    <strong class="col-md-6">Désinfection: </strong>
                    <span class="col-md-6">{{production.facility.facilityCharges.disinfection}}€</span>
                    <br>
                    <strong class="col-md-6">Eau, électricité, divers: </strong>
                    <span class="col-md-6">{{production.facility.facilityCharges.commodities}}€</span>
                    <br>
                    <strong class="col-md-6">Littière: </strong>
                    <span class="col-md-6">{{production.facility.facilityCharges.litter}}€</span>
                    <br>
                    <strong class="col-md-6">Attrapage: </strong>
                    <span class="col-md-6">{{production.facility.facilityCharges.catching}}€</span>
                    <br>
                    <strong class="col-md-6">Assurances: </strong>
                    <span class="col-md-6">{{production.facility.facilityCharges.insurances}}€</span>
                    <br>
                </td>
            </tr>
        </tbody>
    </table>
</div>