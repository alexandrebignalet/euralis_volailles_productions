image: Visual Studio 2017

environment:
  nodejs_version: "9.11.1"

platform:
- x64

cache:
- node_modules
- '%USERPROFILE%\.electron'

init:
- git config --global core.autocrlf input

install:
- ps: Install-Product node $env:nodejs_version
- npm i

build_script:
- npm run release

after_build:
- 7z a euralis_volailles_productions.zip dist\


test: off

artifacts:
- path: euralis_volailles_productions.zip
  name: euralis_volailles_productions

deploy:
- release: euralis_volailles_productions-v$(appveyor_build_version)
  description: 'Release description'     # deploy on tag push only
  provider: GitHub
  artifact: /.*\.zip/
  auth_token:
    secure: a5f1f178b8e92cdb86797e0dea35b943d622ba62
  draft: false # your encrypted token from GitHub
  prerelease: false     # upload all NuGet packages to release assets
  on:
   appveyor_repo_tag: true # deploy on tag push only
